<!DOCTYPE html>
<html>
<head>
   <title>Main Page 1</title>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
   <link rel="stylesheet" type="text/css" href="Main.css">
   <link rel="stylesheet" type="text/css" href="sidebar.css">
   <link rel="stylesheet" type="text/css" href="bubbles.css">
</head>
<body>
   <div id="container">
     <div id="bubbles">
        <div class="bubble x1"></div>
        <div class="bubble x2"></div>
        <div class="bubble x3"></div>
        <div class="bubble x4"></div>
        <div class="bubble x5"></div>
     </div>


      <!-- ///////////////SIDEBAR////////////// -->
      <div id="mySidenav" class="sidenav">
        <ul class="sideNav_ul">
          <li><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a></li>
          <li><a href="#">Album</a></li>
          <li><a href="#">Date</a></li>
          <li><a href="#">Todo</a></li>
          <li><a href="#">Notes</a></li>
        </ul>

      </div>

      <!-- Use any element to open the sidenav -->


      <!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->

      <div id="main">
        <div class="container">

          <div class="row">
            <div class="col-md-12">
              <input type="file" name="file" class="inputimg" id="nameImg" accept="image/*">
            </div>


          </div>
        </div>
      </div>
</body>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
<script src="logic.js" type="text/javascript"></script>
<script>
var file;
// Create a root reference
var storageRef = firebase.storage().ref();



document.getElementById("nameImg").addEventListener("change", function(event) {

  console.log(event.target.files[0]);
  file = event.target.files[0];

  // Create the file metadata
  var metadata = {
    contentType: 'image/jpeg'
  };


  // Upload file and metadata to the object 'images/mountains.jpg'
  var uploadTask = storageRef.child('images/' + file.name).put(file, metadata);

  // Listen for state changes, errors, and completion of the upload.
  uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'
    function(snapshot) {
      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded
      var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
      console.log('Upload is ' + progress + '% done');
      switch (snapshot.state) {
        case firebase.storage.TaskState.PAUSED: // or 'paused'
          console.log('Upload is paused');
          break;
        case firebase.storage.TaskState.RUNNING: // or 'running'
          console.log('Upload is running');
          break;
      }
    }, function(error) {

    // A full list of error codes is available at
    // https://firebase.google.com/docs/storage/web/handle-errors
    switch (error.code) {
      case 'storage/unauthorized':
        // User doesn't have permission to access the object
        break;

      case 'storage/canceled':
        // User canceled the upload
        break;



      case 'storage/unknown':
        // Unknown error occurred, inspect error.serverResponse
        break;
    }
  }, function() {
    // Upload completed successfully, now we can get the download URL
    var downloadSnap = uploadTask.snapshot;
    var downloadURL = uploadTask.snapshot.downloadURL;
    console.log(downloadSnap);
  });
})


</script>
</html>
